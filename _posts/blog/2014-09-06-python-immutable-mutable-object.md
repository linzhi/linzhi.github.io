---
layout: post
title:  python的可变对象与不可变对象
category: blog
description:
---


Python 的内建标准类型有一种分类标准是将对象分为可变(mutable)和不可变(immutable)两种类型：

+ 不可变对象：元组（tuple)、数值型（number)、字符串(string)
+ 可变对象：字典型(dict)和列表型(list)

在不可变对象中，以数值型为例

    a = 1
    a = 2

这样在给一个不可变类型的变量 a 赋新值的时候，实际上是在内存中新建了一个对象，并将 a 指向这个新的对象，然后将原对象的引用计数 –1.原先分配的内存空间会被垃圾收集器回收，这种机制有以下的优点：

+ 不可变类型具有确定不可变的存储需求，解释器可以为它分配一段固定的内存，那么解释器可以重用该对象
+ 不可变类型强调了一种无副作用的编程方式，采用这种编程方式所编写的函数接收输入的参数，进行运算，然后返回一个容纳结果的新对象。而不是修改输入的参数，使它变成运算结果

有一点要注意的，不可变对象在一定范围内是不变的

    a = 1111111111
    b = 1111111111

这种情况下，id(a)不等于id(b)。Python是用一个smallint数组来维护的，相当于一个解释器level的缓存。而超出这个范围[-5, 256)的int，则会在每次声明的时候分别创建，float和tuple同理。

在可变对象中，以列表型为例

    a = [1]
    b = a
    b[0] = 2

变量a和b绑定同一地址，对于任何一个变量的改变都会反映到另外一个变量上。










